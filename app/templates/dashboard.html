{% extends 'base.html' %}
{% block content %}
<h2>–ü—Ä–∏–≤–µ—Ç, {{ current_user.username }}!</h2>

<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
<div class="stats">
  <code># –í—Å–µ–≥–æ: {{ stats.total }} | ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: {{ stats.completed }} | üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ: {{ stats.pending }}</code>
</div>

<!-- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è -->
<form method="GET" class="filter-form">
  <label for="category">–§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
  <select name="category" onchange="this.form.submit()">
    <option value="">–í—Å–µ</option>
    {% for cat in categories %}
      <option value="{{ cat }}" {% if request.args.get('category') == cat %}selected{% endif %}>{{ cat }}</option>
    {% endfor %}
  </select>
</form>

<!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è -->
<form method="POST" class="note-form">
  <textarea name="note" placeholder="–ù–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞..." required></textarea>
  <input type="text" name="category" placeholder="–ö–∞—Ç–µ–≥–æ—Ä–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –£—á—ë–±–∞)">
  <input type="datetime-local" name="deadline">
  <button type="submit">‚ûï –î–æ–±–∞–≤–∏—Ç—å</button>
</form>

<!-- –°–ø–∏—Å–æ–∫ –∑–∞–º–µ—Ç–æ–∫ -->
<div class="notes">
  {% for note in notes %}
  <div class="note {% if note.completed %}completed{% endif %}">
    <p>{{ note.content }}</p>
    <small>
      {% if note.category %}üìÅ {{ note.category }} | {% endif %}
      üïí {{ note.timestamp.strftime('%Y-%m-%d %H:%M') }}
      {% if note.deadline %} | ‚è∞ –î–æ: {{ note.deadline.strftime('%Y-%m-%d %H:%M') }}{% endif %}
    </small>
    <div class="note-actions">
      <a href="{{ url_for('main.toggle_complete', note_id=note.id) }}">
        {% if note.completed %}‚Ü©Ô∏è –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å{% else %}‚úÖ –ó–∞–≤–µ—Ä—à–∏—Ç—å{% endif %}
      </a>
    </div>
  </div>
  {% endfor %}
</div>

<!-- AI-–ø–æ–º–æ—â–Ω–∏–∫ -->
<div class="ai-box">
  <h3>ü§ñ –°–ø—Ä–æ—Å–∏ AI</h3>
  <textarea placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: ¬´–ß—Ç–æ –º–Ω–µ –¥–µ–ª–∞—Ç—å —Å–µ–≥–æ–¥–Ω—è?¬ª" disabled>‚ö†Ô∏è –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –≤ –æ—Ñ—Ñ–ª–∞–π–Ω-–≤–µ—Ä—Å–∏–∏. –≠—Ç–æ –∑–∞–≥–ª—É—à–∫–∞.</textarea>
</div>

<a class="logout" href="{{ url_for('main.logout') }}">üö™ –í—ã–π—Ç–∏</a>
{% endblock %}